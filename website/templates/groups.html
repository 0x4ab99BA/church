{% extends "base.html" %} {% block title %}Home{% endblock %}
{% block content %}
    <h1 align="center">Groups</h1>
    <div class="group-list">
        {% for group in groups %}
            <div class="group">
                <h3>{{ group.name }}</h3>
                <p><strong>Description:</strong> {{ group.description }}</p>
                <p><strong>Creator:</strong> {{ group.creator }}</p>
                <p><strong>Date:</strong> {{ group.time }}</p>
                {% if user.is_authenticated %}
                    {% if group in user.subscriptions %}
                        <form action="{{ url_for('views.unsubscribe', group_id=group.id) }}" method="post">
                            <button type="submit" class="btn btn-danger">Unsubscribe</button>
                        </form>
                    {% else %}
                        <form action="{{ url_for('views.subscribe', group_id=group.id) }}" method="post">
                            <button type="submit" class="btn btn-success">Subscribe</button>
                        </form>
                    {% endif %}
                {% endif %}
            </div>
        {% endfor %}
    </div>

    <br>

     <div class="pagination">
        <ul class="pagination">
            {% if groups.has_prev %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('views.groups', page=groups.prev_num) }}">Previous</a>
                </li>
            {% endif %}
            {% for page_num in groups.iter_pages() %}
                <li class="page-item{% if groups.page == page_num %} active{% endif %}">
                    <a class="page-link" href="{{ url_for('views.groups', page=page_num) }}">{{ page_num }}</a>
                </li>
            {% endfor %}
            {% if groups.has_next %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('views.groups', page=groups.next_num) }}">Next</a>
                </li>
            {% endif %}

            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

            <a href="{{ url_for('views.create_group') }}" class="btn btn-primary">+</a>
        </ul>
     </div>


{% endblock %}